--
USE SceneSwarm01

CREATE TABLE refUserSS.UserStatuses(
	UserStatusID INT NOT NULL
		CONSTRAINT PK_UserStatuses
		PRIMARY KEY IDENTITY
	,UserStatus NVARCHAR(255)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_UserStatuses_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE refUserSS.UserRoles(
	UserRoleID INT NOT NULL
		CONSTRAINT PK_UserRoles
		PRIMARY KEY IDENTITY
	,UserRole NVARCHAR(255) NOT NULL
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_UserRoles_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE UserSS.Users(
	UserID INT NOT NULL
		CONSTRAINT PK_UserID
		PRIMARY KEY IDENTITY
	,FirstName NVARCHAR(255) NOT NULL
	,LastName NVARCHAR(255) NOT NULL
	,Email NVARCHAR(255) NOT NULL
	,UserStatusID INT NOT NULL
		CONSTRAINT FK_Users_UserStatusID
		REFERENCES refUserSS.UserStatuses(UserStatusID)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_Users_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE hr.UserEmployeeXRef(
	UserEmployeeXRefID INT NOT NULL
		CONSTRAINT PK_UserEmployeeXRefID
		PRIMARY KEY IDENTITY
	,UserID INT NOT NULL
		CONSTRAINT FK_UserEmployeeXRef_UserID
		REFERENCES UserSS.Users(UserID)	
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_UserEmployeeXRef_CreatedDate
		DEFAULT GETDATE()
	,Zapped BIT
		CONSTRAINT DF_UserEmployeeXRef_Zapped
		DEFAULT 0
)

CREATE TABLE UserSS.UserRolesXRef(
	UserRoleXRefID INT NOT NULL
		CONSTRAINT PK_UserRolesXRef
		PRIMARY KEY IDENTITY
	,UserID INT NOT NULL
		CONSTRAINT FK_UserRoleXRef_UserID
		REFERENCES UserSS.Users(UserID)
	,UserRoles INT NOT NULL
		CONSTRAINT FK_UserRoleXRef_UserRoleID
		REFERENCES refUserSS.UserRoles(UserRoleID)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_UserRolesXRef_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE refAdminSS.AdminRoles(
	AdminRoleID INT NOT NULL
		CONSTRAINT PK_AdminRoles
		PRIMARY KEY IDENTITY
	,AdminRole NVARCHAR(255)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_AdminRoles_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE AdminSS.Admins(
	AdminID INT NOT NULL
		CONSTRAINT PK_Admins
		PRIMARY KEY IDENTITY
	,UserID INT NOT NULL
		CONSTRAINT FK_Admins_UserID
		REFERENCES UserSS.Users(UserID)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_Admins_CreatedDate
		DEFAULT GETDATE()
)

CREATE TABLE AdminSS.AdminRolesXRef(
	AdminRolesXRefID INT NOT NULL
		CONSTRAINT PK_AdminRolesXRef
		PRIMARY KEY IDENTITY
	,AdminID INT NOT NULL
		CONSTRAINT FK_AdminRolesXRef_AdminID
		REFERENCES AdminSS.Admins(AdminID)
	,UserRoles INT NOT NULL
		CONSTRAINT FK_AdminRolesXRef_AdminRoleID
		REFERENCES refAdminSS.AdminRoles(AdminRoleID)
	,CreatedDate DATETIME NOT NULL
		CONSTRAINT DF_AdminRolesXRef_CreatedDate
		DEFAULT GETDATE()
)


/*

DROP TABLE AdminSS.AdminRolesXRef
DROP TABLE AdminSS.Admins
DROP TABLE refAdminSS.AdminRoles
DROP TABLE UserSS.UserRolesXRef
DROP TABLE hr.UserEmployeeXRef
DROP TABLE UserSS.Users
DROP TABLE refUserSS.UserRoles
DROP TABLE refUserSS.UserStatuses

*/